# Global Server Load Balancing Test Suite

## Testing Primary and Secondary Site Failover

```
export HOST="ggw.dev.api.gov.bc.ca"
export GOLD="142.34.229.4"
export GOLDDR="142.34.64.4"

export KUBE_PRIMARY_CONTEXT=""
export KUBE_DR_CONTEXT=""
export HEALTH_CHECK_SERVICE=""

echo '
GSLB_HOST="$HOST.glb.gov.bc.ca"
BOTH="$GOLD\n$GOLDDR"

start=`date +%s`

function echo {
  diff=$(expr `date +%s` - $start)
  printf "[%05d] %s\n" $diff "$1"
}

# repeat <attempts> <wait> <cmd>
function repeat {
  echo "--"
  attempts=$1
  fails=attempts
  n=0
  until [ "$n" -ge $attempts ]
  do
    "${@:3}" && fails=$((fails-1))
    n=$((n+1))
    sleep $2
  done
  echo "REPEATS ($fails of $attempts) COMMAND ${@:3}"
  if [ $fails -gt 0 ]
  then
    echo "REPEATS > TOO MANY FAILURES"
  else
    echo "REPEATS > NICE! ALL ATTEMPTS WERE OK!"
  fi
  echo "--"
}

# try <attempts> <wait> <cmd>
function try {
  n=0
  until [ "$n" -ge $1 ]
  do
    "${@:3}" && return 0
    n=$((n+1))
    sleep $2
  done
  echo "FAILED COMMAND ${@:3}"
  exit 1
}

function scale_gold {
  REPLICAS=$1
  kubectl config use-context $KUBE_PRIMARY_CONTEXT > /dev/null
  kubectl scale --replicas=$REPLICAS deployment $HEALTH_CHECK_SERVICE > /dev/null
  echo "-> SCALED GOLD TO $REPLICAS replicas"
}

function scale_golddr {
  REPLICAS=$1
  kubectl config use-context $KUBE_DR_CONTEXT > /dev/null
  kubectl scale --replicas=$REPLICAS deployment $HEALTH_CHECK_SERVICE > /dev/null
  echo "-> SCALED GOLDDR TO $REPLICAS replicas"
}

function is_up {
  IP=$1
  RES=`curl -s -k -m 1 https://$IP/health -H "Host: $HOST"`
  if [ "$RES" = "<html><body>iamalive</body></html>" ]
  then
    print_ip $IP " : UP"
    return 0
  else
    print_ip $IP " : DOWN"
    return 1
  fi
}

function is_down {
  IP=$1
  RES=`curl -s -k -m 1 https://$IP/health -H "Host: $HOST"`
  if [ "$RES" = "<html><body>iamalive</body></html>" ]
  then
    print_ip $IP " : UP"
    return 1
  else
    print_ip $IP " : DOWN"
    return 0
  fi
}

function print_ip {
  EXP_IP="$1"
  MSG="$2"
  if [ "$EXP_IP" = "$GOLD" ]
  then
    echo "-> GOLD[$GOLD] $MSG"
  elif [ "$EXP_IP" = "$GOLDDR" ]
  then
    echo "-> GOLDDR[$GOLDDR] $MSG"
  elif [ "$EXP_IP" = "$GOLD\n$GOLDDR" ]
  then
    echo "-> BOTH IPS $MSG"
  elif [ "$EXP_IP" = "$GOLDDR\n$GOLD" ]
  then
    echo "-> BOTH IPS $MSG"
  else
    echo "-> UNEXPECTED DIG ($EXP_IP) $MSG"
  fi
}

function expect_routing_to {
  MATCH="$1"
  IP=`dig $GSLB_HOST +short`
  print_ip "$MATCH" " : EXPECTING.."
  if [ "$IP" = "$MATCH" ]
  then
    echo "-> SUCCESS!"
    return 0
  fi
  echo "-> FAILED - NOT WHAT IS EXPECTED [DIG = $IP]"
  return 1
}

function print_header {
  echo "SLEEP 20 seconds.."
  sleep 20
  echo ""
  echo "---------"
  echo "$1"
  echo "---------"

}

function baseline_all_down {
  print_header "BASELINE ALL DOWN - down/down"
  scale_gold 0
  scale_golddr 0
  try 20 1 is_down $GOLD
  try 20 1 is_down $GOLDDR
}

function test_happy_path {
  print_header "HAPPY PATH - up/up - expect GOLD IP"
  scale_gold 2
  scale_golddr 2
  try 20 1 is_up $GOLD
  try 20 1 is_up $GOLDDR
  try 15 2 expect_routing_to $GOLD
  repeat 30 .5 expect_routing_to "$GOLD"
  repeat 30 .5 expect_routing_to "$GOLD"
  repeat 30 .5 expect_routing_to "$GOLD"
}

function test_switch_to_dr {
  print_header "SWITCH TO DR - down/up - expect GOLDDR IP"
  scale_gold 0
  scale_golddr 2
  try 20 1 is_down $GOLD
  try 20 1 is_up $GOLDDR
  try 15 2 expect_routing_to $GOLDDR
  repeat 30 .5 expect_routing_to "$GOLDDR"
  repeat 30 .5 expect_routing_to "$GOLDDR"
  repeat 30 .5 expect_routing_to "$GOLDDR"
}

function test_total_outage {
  print_header "TOTAL OUTAGE - down/down - expect BOTH IP"
  scale_gold 0
  scale_golddr 0
  try 20 1 is_down $GOLD
  try 20 1 is_down $GOLDDR
  try 40 2 expect_routing_to "$BOTH"
}

function test_switch_to_primary {
  print_header "SWITCH TO PRIMARY - up/up - expect GOLD IP"
  scale_gold 2
  scale_golddr 2
  try 20 1 is_up $GOLD
  try 20 1 is_up $GOLDDR
  try 15 2 expect_routing_to $GOLD
  repeat 30 .5 expect_routing_to "$GOLD"
  repeat 30 .5 expect_routing_to "$GOLD"
  repeat 30 .5 expect_routing_to "$GOLD"
}

function test_dr_down {
  print_header "TAKE DR DOWN - up/down - expect GOLD IP"
  scale_gold 2
  scale_golddr 0
  try 20 1 is_up $GOLD
  try 20 1 is_down $GOLDDR
  try 15 2 expect_routing_to $GOLD
  repeat 30 .5 expect_routing_to "$GOLD"
}

function test_dr_then_recovery {
  print_header "DR THEN RECOVERY"
  scale_gold 0
  scale_golddr 2
  try 20 1 is_down $GOLD
  try 20 1 is_up $GOLDDR
  try 30 2 expect_routing_to "$GOLDDR"
  repeat 30 .5 expect_routing_to "$GOLDDR"
  repeat 30 .5 expect_routing_to "$GOLDDR"
  scale_gold 2
  try 20 1 is_up $GOLD
  repeat 30 .5 expect_routing_to "$GOLD"
  repeat 30 .5 expect_routing_to "$GOLD"
  repeat 30 .5 expect_routing_to "$GOLD"
}

baseline_all_down
test_happy_path
test_switch_to_dr
test_total_outage
test_switch_to_primary
test_dr_down
test_dr_then_recovery

' | bash

```

## Output for APS

```
[00000] SLEEP 20 seconds..
[00020]
[00020] ---------
[00020] BASELINE ALL DOWN - down/down
[00020] ---------
[00021] -> SCALED GOLD TO 0 replicas
[00021] -> SCALED GOLDDR TO 0 replicas
[00022] -> GOLD[142.34.229.4]  : DOWN
[00022] -> GOLDDR[142.34.64.4]  : DOWN
[00022] SLEEP 20 seconds..
[00042]
[00042] ---------
[00042] HAPPY PATH - up/up - expect GOLD IP
[00042] ---------
[00042] -> SCALED GOLD TO 2 replicas
[00043] -> SCALED GOLDDR TO 2 replicas
[00043] -> GOLD[142.34.229.4]  : DOWN
[00044] -> GOLD[142.34.229.4]  : DOWN
[00045] -> GOLD[142.34.229.4]  : DOWN
[00047] -> GOLD[142.34.229.4]  : DOWN
[00048] -> GOLD[142.34.229.4]  : DOWN
[00050] -> GOLD[142.34.229.4]  : DOWN
[00052] -> GOLD[142.34.229.4]  : DOWN
[00053] -> GOLD[142.34.229.4]  : UP
[00054] -> GOLDDR[142.34.64.4]  : DOWN
[00056] -> GOLDDR[142.34.64.4]  : DOWN
[00058] -> GOLDDR[142.34.64.4]  : DOWN
[00060] -> GOLDDR[142.34.64.4]  : UP
[00060] -> GOLD[142.34.229.4]  : EXPECTING..
[00060] -> SUCCESS!
[00060] --
[00060] -> GOLD[142.34.229.4]  : EXPECTING..
[00060] -> SUCCESS!
[00061] -> GOLD[142.34.229.4]  : EXPECTING..
[00061] -> SUCCESS!
[00061] -> GOLD[142.34.229.4]  : EXPECTING..
[00061] -> SUCCESS!
[00062] -> GOLD[142.34.229.4]  : EXPECTING..
[00062] -> SUCCESS!
[00063] -> GOLD[142.34.229.4]  : EXPECTING..
[00063] -> SUCCESS!
[00063] -> GOLD[142.34.229.4]  : EXPECTING..
[00063] -> SUCCESS!
[00064] -> GOLD[142.34.229.4]  : EXPECTING..
[00064] -> SUCCESS!
[00064] -> GOLD[142.34.229.4]  : EXPECTING..
[00064] -> SUCCESS!
[00065] -> GOLD[142.34.229.4]  : EXPECTING..
[00065] -> SUCCESS!
[00065] -> GOLD[142.34.229.4]  : EXPECTING..
[00065] -> SUCCESS!
[00066] -> GOLD[142.34.229.4]  : EXPECTING..
[00066] -> SUCCESS!
[00067] -> GOLD[142.34.229.4]  : EXPECTING..
[00067] -> SUCCESS!
[00067] -> GOLD[142.34.229.4]  : EXPECTING..
[00067] -> SUCCESS!
[00068] -> GOLD[142.34.229.4]  : EXPECTING..
[00068] -> SUCCESS!
[00068] -> GOLD[142.34.229.4]  : EXPECTING..
[00068] -> SUCCESS!
[00069] -> GOLD[142.34.229.4]  : EXPECTING..
[00069] -> SUCCESS!
[00069] -> GOLD[142.34.229.4]  : EXPECTING..
[00069] -> SUCCESS!
[00070] -> GOLD[142.34.229.4]  : EXPECTING..
[00070] -> SUCCESS!
[00070] -> GOLD[142.34.229.4]  : EXPECTING..
[00070] -> SUCCESS!
[00071] -> GOLD[142.34.229.4]  : EXPECTING..
[00071] -> SUCCESS!
[00071] -> GOLD[142.34.229.4]  : EXPECTING..
[00071] -> SUCCESS!
[00072] -> GOLD[142.34.229.4]  : EXPECTING..
[00072] -> SUCCESS!
[00073] -> GOLD[142.34.229.4]  : EXPECTING..
[00073] -> SUCCESS!
[00073] -> GOLD[142.34.229.4]  : EXPECTING..
[00073] -> SUCCESS!
[00074] -> GOLD[142.34.229.4]  : EXPECTING..
[00074] -> SUCCESS!
[00074] -> GOLD[142.34.229.4]  : EXPECTING..
[00074] -> SUCCESS!
[00075] -> GOLD[142.34.229.4]  : EXPECTING..
[00075] -> SUCCESS!
[00075] -> GOLD[142.34.229.4]  : EXPECTING..
[00075] -> SUCCESS!
[00076] -> GOLD[142.34.229.4]  : EXPECTING..
[00076] -> SUCCESS!
[00077] -> GOLD[142.34.229.4]  : EXPECTING..
[00077] -> SUCCESS!
[00077] REPEATS (0 of 30) COMMAND expect_routing_to
[00077] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00077] --
[00077] --
[00077] -> GOLD[142.34.229.4]  : EXPECTING..
[00077] -> SUCCESS!
[00078] -> GOLD[142.34.229.4]  : EXPECTING..
[00078] -> SUCCESS!
[00078] -> GOLD[142.34.229.4]  : EXPECTING..
[00078] -> SUCCESS!
[00079] -> GOLD[142.34.229.4]  : EXPECTING..
[00079] -> SUCCESS!
[00079] -> GOLD[142.34.229.4]  : EXPECTING..
[00079] -> SUCCESS!
[00080] -> GOLD[142.34.229.4]  : EXPECTING..
[00080] -> SUCCESS!
[00080] -> GOLD[142.34.229.4]  : EXPECTING..
[00080] -> SUCCESS!
[00081] -> GOLD[142.34.229.4]  : EXPECTING..
[00081] -> SUCCESS!
[00082] -> GOLD[142.34.229.4]  : EXPECTING..
[00082] -> SUCCESS!
[00082] -> GOLD[142.34.229.4]  : EXPECTING..
[00082] -> SUCCESS!
[00083] -> GOLD[142.34.229.4]  : EXPECTING..
[00083] -> SUCCESS!
[00083] -> GOLD[142.34.229.4]  : EXPECTING..
[00083] -> SUCCESS!
[00084] -> GOLD[142.34.229.4]  : EXPECTING..
[00084] -> SUCCESS!
[00084] -> GOLD[142.34.229.4]  : EXPECTING..
[00084] -> SUCCESS!
[00085] -> GOLD[142.34.229.4]  : EXPECTING..
[00085] -> SUCCESS!
[00085] -> GOLD[142.34.229.4]  : EXPECTING..
[00085] -> SUCCESS!
[00086] -> GOLD[142.34.229.4]  : EXPECTING..
[00086] -> SUCCESS!
[00087] -> GOLD[142.34.229.4]  : EXPECTING..
[00087] -> SUCCESS!
[00087] -> GOLD[142.34.229.4]  : EXPECTING..
[00087] -> SUCCESS!
[00088] -> GOLD[142.34.229.4]  : EXPECTING..
[00088] -> SUCCESS!
[00088] -> GOLD[142.34.229.4]  : EXPECTING..
[00088] -> SUCCESS!
[00089] -> GOLD[142.34.229.4]  : EXPECTING..
[00089] -> SUCCESS!
[00089] -> GOLD[142.34.229.4]  : EXPECTING..
[00089] -> SUCCESS!
[00090] -> GOLD[142.34.229.4]  : EXPECTING..
[00090] -> SUCCESS!
[00090] -> GOLD[142.34.229.4]  : EXPECTING..
[00090] -> SUCCESS!
[00091] -> GOLD[142.34.229.4]  : EXPECTING..
[00091] -> SUCCESS!
[00091] -> GOLD[142.34.229.4]  : EXPECTING..
[00091] -> SUCCESS!
[00092] -> GOLD[142.34.229.4]  : EXPECTING..
[00092] -> SUCCESS!
[00093] -> GOLD[142.34.229.4]  : EXPECTING..
[00093] -> SUCCESS!
[00093] -> GOLD[142.34.229.4]  : EXPECTING..
[00093] -> SUCCESS!
[00094] REPEATS (0 of 30) COMMAND expect_routing_to
[00094] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00094] --
[00094] --
[00094] -> GOLD[142.34.229.4]  : EXPECTING..
[00094] -> SUCCESS!
[00094] -> GOLD[142.34.229.4]  : EXPECTING..
[00094] -> SUCCESS!
[00095] -> GOLD[142.34.229.4]  : EXPECTING..
[00095] -> SUCCESS!
[00095] -> GOLD[142.34.229.4]  : EXPECTING..
[00095] -> SUCCESS!
[00096] -> GOLD[142.34.229.4]  : EXPECTING..
[00096] -> SUCCESS!
[00096] -> GOLD[142.34.229.4]  : EXPECTING..
[00096] -> SUCCESS!
[00097] -> GOLD[142.34.229.4]  : EXPECTING..
[00097] -> SUCCESS!
[00097] -> GOLD[142.34.229.4]  : EXPECTING..
[00097] -> SUCCESS!
[00098] -> GOLD[142.34.229.4]  : EXPECTING..
[00098] -> SUCCESS!
[00099] -> GOLD[142.34.229.4]  : EXPECTING..
[00099] -> SUCCESS!
[00099] -> GOLD[142.34.229.4]  : EXPECTING..
[00099] -> SUCCESS!
[00100] -> GOLD[142.34.229.4]  : EXPECTING..
[00100] -> SUCCESS!
[00100] -> GOLD[142.34.229.4]  : EXPECTING..
[00100] -> SUCCESS!
[00101] -> GOLD[142.34.229.4]  : EXPECTING..
[00101] -> SUCCESS!
[00101] -> GOLD[142.34.229.4]  : EXPECTING..
[00101] -> SUCCESS!
[00102] -> GOLD[142.34.229.4]  : EXPECTING..
[00102] -> SUCCESS!
[00102] -> GOLD[142.34.229.4]  : EXPECTING..
[00102] -> SUCCESS!
[00103] -> GOLD[142.34.229.4]  : EXPECTING..
[00103] -> SUCCESS!
[00104] -> GOLD[142.34.229.4]  : EXPECTING..
[00104] -> SUCCESS!
[00104] -> GOLD[142.34.229.4]  : EXPECTING..
[00104] -> SUCCESS!
[00105] -> GOLD[142.34.229.4]  : EXPECTING..
[00105] -> SUCCESS!
[00105] -> GOLD[142.34.229.4]  : EXPECTING..
[00105] -> SUCCESS!
[00106] -> GOLD[142.34.229.4]  : EXPECTING..
[00106] -> SUCCESS!
[00106] -> GOLD[142.34.229.4]  : EXPECTING..
[00106] -> SUCCESS!
[00107] -> GOLD[142.34.229.4]  : EXPECTING..
[00107] -> SUCCESS!
[00107] -> GOLD[142.34.229.4]  : EXPECTING..
[00107] -> SUCCESS!
[00108] -> GOLD[142.34.229.4]  : EXPECTING..
[00108] -> SUCCESS!
[00108] -> GOLD[142.34.229.4]  : EXPECTING..
[00108] -> SUCCESS!
[00109] -> GOLD[142.34.229.4]  : EXPECTING..
[00109] -> SUCCESS!
[00109] -> GOLD[142.34.229.4]  : EXPECTING..
[00109] -> SUCCESS!
[00110] REPEATS (0 of 30) COMMAND expect_routing_to
[00110] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00110] --
[00110] SLEEP 20 seconds..
[00130]
[00130] ---------
[00130] SWITCH TO DR - down/up - expect GOLDDR IP
[00130] ---------
[00131] -> SCALED GOLD TO 0 replicas
[00131] -> SCALED GOLDDR TO 2 replicas
[00132] -> GOLD[142.34.229.4]  : DOWN
[00132] -> GOLDDR[142.34.64.4]  : UP
[00132] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00132] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00134] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00134] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00136] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00136] -> SUCCESS!
[00136] --
[00136] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00136] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00137] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00137] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00137] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00137] -> SUCCESS!
[00138] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00138] -> SUCCESS!
[00138] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00138] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00139] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00139] -> SUCCESS!
[00139] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00139] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00140] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00140] -> SUCCESS!
[00140] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00140] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00141] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00141] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00142] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00142] -> SUCCESS!
[00142] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00142] -> SUCCESS!
[00143] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00143] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00144] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00144] -> SUCCESS!
[00144] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00144] -> SUCCESS!
[00145] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00145] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00145] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00145] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00146] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00146] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00146] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00146] -> SUCCESS!
[00147] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00147] -> SUCCESS!
[00147] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00147] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00148] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00148] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00149] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00149] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00149] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00149] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00150] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00150] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00150] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00150] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00151] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00151] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00151] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00151] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00152] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00152] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00152] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00152] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00153] REPEATS (20 of 30) COMMAND expect_routing_to
[00153] REPEATS > TOO MANY FAILURES
[00153] --
[00153] --
[00153] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00153] -> SUCCESS!
[00153] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00153] -> SUCCESS!
[00154] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00154] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00155] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00155] -> SUCCESS!
[00155] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00155] -> SUCCESS!
[00156] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00156] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00156] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00156] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00157] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00157] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00157] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00157] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00158] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00158] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00158] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00158] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00159] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00159] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00159] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00159] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00160] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00160] -> SUCCESS!
[00161] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00161] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4]
[00161] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00161] -> SUCCESS!
[00162] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00162] -> SUCCESS!
[00162] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00162] -> SUCCESS!
[00163] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00163] -> SUCCESS!
[00163] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00163] -> SUCCESS!
[00164] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00164] -> SUCCESS!
[00164] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00164] -> SUCCESS!
[00165] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00165] -> SUCCESS!
[00165] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00165] -> SUCCESS!
[00166] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00166] -> SUCCESS!
[00167] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00167] -> SUCCESS!
[00167] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00167] -> SUCCESS!
[00168] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00168] -> SUCCESS!
[00168] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00168] -> SUCCESS!
[00169] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00169] -> SUCCESS!
[00169] REPEATS (10 of 30) COMMAND expect_routing_to
[00169] REPEATS > TOO MANY FAILURES
[00169] --
[00169] --
[00169] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00169] -> SUCCESS!
[00170] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00170] -> SUCCESS!
[00170] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00170] -> SUCCESS!
[00171] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00171] -> SUCCESS!
[00171] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00171] -> SUCCESS!
[00172] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00172] -> SUCCESS!
[00173] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00173] -> SUCCESS!
[00173] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00173] -> SUCCESS!
[00174] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00174] -> SUCCESS!
[00174] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00174] -> SUCCESS!
[00175] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00175] -> SUCCESS!
[00175] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00175] -> SUCCESS!
[00176] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00176] -> SUCCESS!
[00176] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00176] -> SUCCESS!
[00177] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00177] -> SUCCESS!
[00177] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00177] -> SUCCESS!
[00178] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00178] -> SUCCESS!
[00178] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00178] -> SUCCESS!
[00179] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00179] -> SUCCESS!
[00180] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00180] -> SUCCESS!
[00180] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00180] -> SUCCESS!
[00181] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00181] -> SUCCESS!
[00181] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00181] -> SUCCESS!
[00182] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00182] -> SUCCESS!
[00182] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00182] -> SUCCESS!
[00183] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00183] -> SUCCESS!
[00183] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00183] -> SUCCESS!
[00184] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00184] -> SUCCESS!
[00184] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00184] -> SUCCESS!
[00185] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00185] -> SUCCESS!
[00185] REPEATS (0 of 30) COMMAND expect_routing_to
[00185] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00185] --
[00185] SLEEP 20 seconds..
[00205]
[00205] ---------
[00205] TOTAL OUTAGE - down/down - expect BOTH IP
[00205] ---------
[00206] -> SCALED GOLD TO 0 replicas
[00207] -> SCALED GOLDDR TO 0 replicas
[00207] -> GOLD[142.34.229.4]  : DOWN
[00208] -> GOLDDR[142.34.64.4]  : DOWN
[00208] -> BOTH IPS  : EXPECTING..
[00208] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00210] -> BOTH IPS  : EXPECTING..
[00210] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00212] -> BOTH IPS  : EXPECTING..
[00212] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00214] -> BOTH IPS  : EXPECTING..
[00214] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00216] -> BOTH IPS  : EXPECTING..
[00216] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4
142.34.229.4]
[00218] -> BOTH IPS  : EXPECTING..
[00218] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00220] -> BOTH IPS  : EXPECTING..
[00220] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00223] -> BOTH IPS  : EXPECTING..
[00223] -> SUCCESS!
[00223] SLEEP 20 seconds..
[00243]
[00243] ---------
[00243] SWITCH TO PRIMARY - up/up - expect GOLD IP
[00243] ---------
[00243] -> SCALED GOLD TO 2 replicas
[00244] -> SCALED GOLDDR TO 2 replicas
[00244] -> GOLD[142.34.229.4]  : DOWN
[00245] -> GOLD[142.34.229.4]  : DOWN
[00246] -> GOLD[142.34.229.4]  : DOWN
[00248] -> GOLD[142.34.229.4]  : DOWN
[00249] -> GOLD[142.34.229.4]  : DOWN
[00251] -> GOLD[142.34.229.4]  : DOWN
[00253] -> GOLD[142.34.229.4]  : DOWN
[00254] -> GOLD[142.34.229.4]  : UP
[00255] -> GOLDDR[142.34.64.4]  : DOWN
[00257] -> GOLDDR[142.34.64.4]  : DOWN
[00259] -> GOLDDR[142.34.64.4]  : DOWN
[00261] -> GOLDDR[142.34.64.4]  : UP
[00261] -> GOLD[142.34.229.4]  : EXPECTING..
[00261] -> SUCCESS!
[00261] --
[00261] -> GOLD[142.34.229.4]  : EXPECTING..
[00261] -> SUCCESS!
[00261] -> GOLD[142.34.229.4]  : EXPECTING..
[00261] -> SUCCESS!
[00262] -> GOLD[142.34.229.4]  : EXPECTING..
[00262] -> SUCCESS!
[00262] -> GOLD[142.34.229.4]  : EXPECTING..
[00262] -> SUCCESS!
[00263] -> GOLD[142.34.229.4]  : EXPECTING..
[00263] -> SUCCESS!
[00264] -> GOLD[142.34.229.4]  : EXPECTING..
[00264] -> SUCCESS!
[00264] -> GOLD[142.34.229.4]  : EXPECTING..
[00264] -> SUCCESS!
[00265] -> GOLD[142.34.229.4]  : EXPECTING..
[00265] -> SUCCESS!
[00265] -> GOLD[142.34.229.4]  : EXPECTING..
[00265] -> SUCCESS!
[00266] -> GOLD[142.34.229.4]  : EXPECTING..
[00266] -> SUCCESS!
[00266] -> GOLD[142.34.229.4]  : EXPECTING..
[00266] -> SUCCESS!
[00267] -> GOLD[142.34.229.4]  : EXPECTING..
[00267] -> SUCCESS!
[00267] -> GOLD[142.34.229.4]  : EXPECTING..
[00267] -> SUCCESS!
[00268] -> GOLD[142.34.229.4]  : EXPECTING..
[00268] -> SUCCESS!
[00269] -> GOLD[142.34.229.4]  : EXPECTING..
[00269] -> SUCCESS!
[00269] -> GOLD[142.34.229.4]  : EXPECTING..
[00269] -> SUCCESS!
[00270] -> GOLD[142.34.229.4]  : EXPECTING..
[00270] -> SUCCESS!
[00270] -> GOLD[142.34.229.4]  : EXPECTING..
[00270] -> SUCCESS!
[00271] -> GOLD[142.34.229.4]  : EXPECTING..
[00271] -> SUCCESS!
[00271] -> GOLD[142.34.229.4]  : EXPECTING..
[00271] -> SUCCESS!
[00272] -> GOLD[142.34.229.4]  : EXPECTING..
[00272] -> SUCCESS!
[00272] -> GOLD[142.34.229.4]  : EXPECTING..
[00272] -> SUCCESS!
[00273] -> GOLD[142.34.229.4]  : EXPECTING..
[00273] -> SUCCESS!
[00274] -> GOLD[142.34.229.4]  : EXPECTING..
[00274] -> SUCCESS!
[00274] -> GOLD[142.34.229.4]  : EXPECTING..
[00274] -> SUCCESS!
[00275] -> GOLD[142.34.229.4]  : EXPECTING..
[00275] -> SUCCESS!
[00275] -> GOLD[142.34.229.4]  : EXPECTING..
[00275] -> SUCCESS!
[00276] -> GOLD[142.34.229.4]  : EXPECTING..
[00276] -> SUCCESS!
[00276] -> GOLD[142.34.229.4]  : EXPECTING..
[00276] -> SUCCESS!
[00277] -> GOLD[142.34.229.4]  : EXPECTING..
[00277] -> SUCCESS!
[00277] REPEATS (0 of 30) COMMAND expect_routing_to
[00277] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00277] --
[00277] --
[00277] -> GOLD[142.34.229.4]  : EXPECTING..
[00277] -> SUCCESS!
[00278] -> GOLD[142.34.229.4]  : EXPECTING..
[00278] -> SUCCESS!
[00279] -> GOLD[142.34.229.4]  : EXPECTING..
[00279] -> SUCCESS!
[00279] -> GOLD[142.34.229.4]  : EXPECTING..
[00279] -> SUCCESS!
[00280] -> GOLD[142.34.229.4]  : EXPECTING..
[00280] -> SUCCESS!
[00280] -> GOLD[142.34.229.4]  : EXPECTING..
[00280] -> SUCCESS!
[00281] -> GOLD[142.34.229.4]  : EXPECTING..
[00281] -> SUCCESS!
[00281] -> GOLD[142.34.229.4]  : EXPECTING..
[00281] -> SUCCESS!
[00282] -> GOLD[142.34.229.4]  : EXPECTING..
[00282] -> SUCCESS!
[00282] -> GOLD[142.34.229.4]  : EXPECTING..
[00282] -> SUCCESS!
[00283] -> GOLD[142.34.229.4]  : EXPECTING..
[00283] -> SUCCESS!
[00283] -> GOLD[142.34.229.4]  : EXPECTING..
[00283] -> SUCCESS!
[00284] -> GOLD[142.34.229.4]  : EXPECTING..
[00284] -> SUCCESS!
[00284] -> GOLD[142.34.229.4]  : EXPECTING..
[00284] -> SUCCESS!
[00285] -> GOLD[142.34.229.4]  : EXPECTING..
[00285] -> SUCCESS!
[00286] -> GOLD[142.34.229.4]  : EXPECTING..
[00286] -> SUCCESS!
[00286] -> GOLD[142.34.229.4]  : EXPECTING..
[00286] -> SUCCESS!
[00287] -> GOLD[142.34.229.4]  : EXPECTING..
[00287] -> SUCCESS!
[00287] -> GOLD[142.34.229.4]  : EXPECTING..
[00287] -> SUCCESS!
[00288] -> GOLD[142.34.229.4]  : EXPECTING..
[00288] -> SUCCESS!
[00288] -> GOLD[142.34.229.4]  : EXPECTING..
[00288] -> SUCCESS!
[00289] -> GOLD[142.34.229.4]  : EXPECTING..
[00289] -> SUCCESS!
[00289] -> GOLD[142.34.229.4]  : EXPECTING..
[00289] -> SUCCESS!
[00290] -> GOLD[142.34.229.4]  : EXPECTING..
[00290] -> SUCCESS!
[00290] -> GOLD[142.34.229.4]  : EXPECTING..
[00290] -> SUCCESS!
[00291] -> GOLD[142.34.229.4]  : EXPECTING..
[00291] -> SUCCESS!
[00292] -> GOLD[142.34.229.4]  : EXPECTING..
[00292] -> SUCCESS!
[00292] -> GOLD[142.34.229.4]  : EXPECTING..
[00292] -> SUCCESS!
[00293] -> GOLD[142.34.229.4]  : EXPECTING..
[00293] -> SUCCESS!
[00293] -> GOLD[142.34.229.4]  : EXPECTING..
[00293] -> SUCCESS!
[00294] REPEATS (0 of 30) COMMAND expect_routing_to
[00294] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00294] --
[00294] --
[00294] -> GOLD[142.34.229.4]  : EXPECTING..
[00294] -> SUCCESS!
[00294] -> GOLD[142.34.229.4]  : EXPECTING..
[00294] -> SUCCESS!
[00295] -> GOLD[142.34.229.4]  : EXPECTING..
[00295] -> SUCCESS!
[00295] -> GOLD[142.34.229.4]  : EXPECTING..
[00295] -> SUCCESS!
[00296] -> GOLD[142.34.229.4]  : EXPECTING..
[00296] -> SUCCESS!
[00296] -> GOLD[142.34.229.4]  : EXPECTING..
[00296] -> SUCCESS!
[00297] -> GOLD[142.34.229.4]  : EXPECTING..
[00297] -> SUCCESS!
[00297] -> GOLD[142.34.229.4]  : EXPECTING..
[00297] -> SUCCESS!
[00298] -> GOLD[142.34.229.4]  : EXPECTING..
[00298] -> SUCCESS!
[00299] -> GOLD[142.34.229.4]  : EXPECTING..
[00299] -> SUCCESS!
[00299] -> GOLD[142.34.229.4]  : EXPECTING..
[00299] -> SUCCESS!
[00300] -> GOLD[142.34.229.4]  : EXPECTING..
[00300] -> SUCCESS!
[00300] -> GOLD[142.34.229.4]  : EXPECTING..
[00300] -> SUCCESS!
[00301] -> GOLD[142.34.229.4]  : EXPECTING..
[00301] -> SUCCESS!
[00301] -> GOLD[142.34.229.4]  : EXPECTING..
[00301] -> SUCCESS!
[00302] -> GOLD[142.34.229.4]  : EXPECTING..
[00302] -> SUCCESS!
[00302] -> GOLD[142.34.229.4]  : EXPECTING..
[00302] -> SUCCESS!
[00303] -> GOLD[142.34.229.4]  : EXPECTING..
[00303] -> SUCCESS!
[00303] -> GOLD[142.34.229.4]  : EXPECTING..
[00303] -> SUCCESS!
[00304] -> GOLD[142.34.229.4]  : EXPECTING..
[00304] -> SUCCESS!
[00304] -> GOLD[142.34.229.4]  : EXPECTING..
[00304] -> SUCCESS!
[00305] -> GOLD[142.34.229.4]  : EXPECTING..
[00305] -> SUCCESS!
[00306] -> GOLD[142.34.229.4]  : EXPECTING..
[00306] -> SUCCESS!
[00306] -> GOLD[142.34.229.4]  : EXPECTING..
[00306] -> SUCCESS!
[00307] -> GOLD[142.34.229.4]  : EXPECTING..
[00307] -> SUCCESS!
[00307] -> GOLD[142.34.229.4]  : EXPECTING..
[00307] -> SUCCESS!
[00308] -> GOLD[142.34.229.4]  : EXPECTING..
[00308] -> SUCCESS!
[00308] -> GOLD[142.34.229.4]  : EXPECTING..
[00308] -> SUCCESS!
[00309] -> GOLD[142.34.229.4]  : EXPECTING..
[00309] -> SUCCESS!
[00309] -> GOLD[142.34.229.4]  : EXPECTING..
[00309] -> SUCCESS!
[00310] REPEATS (0 of 30) COMMAND expect_routing_to
[00310] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00310] --
[00310] SLEEP 20 seconds..
[00330]
[00330] ---------
[00330] TAKE DR DOWN - up/down - expect GOLD IP
[00330] ---------
[00331] -> SCALED GOLD TO 2 replicas
[00331] -> SCALED GOLDDR TO 0 replicas
[00332] -> GOLD[142.34.229.4]  : UP
[00333] -> GOLDDR[142.34.64.4]  : DOWN
[00333] -> GOLD[142.34.229.4]  : EXPECTING..
[00333] -> SUCCESS!
[00333] --
[00333] -> GOLD[142.34.229.4]  : EXPECTING..
[00333] -> SUCCESS!
[00333] -> GOLD[142.34.229.4]  : EXPECTING..
[00333] -> SUCCESS!
[00334] -> GOLD[142.34.229.4]  : EXPECTING..
[00334] -> SUCCESS!
[00334] -> GOLD[142.34.229.4]  : EXPECTING..
[00334] -> SUCCESS!
[00335] -> GOLD[142.34.229.4]  : EXPECTING..
[00335] -> SUCCESS!
[00336] -> GOLD[142.34.229.4]  : EXPECTING..
[00336] -> SUCCESS!
[00336] -> GOLD[142.34.229.4]  : EXPECTING..
[00336] -> SUCCESS!
[00337] -> GOLD[142.34.229.4]  : EXPECTING..
[00337] -> SUCCESS!
[00337] -> GOLD[142.34.229.4]  : EXPECTING..
[00337] -> SUCCESS!
[00338] -> GOLD[142.34.229.4]  : EXPECTING..
[00338] -> SUCCESS!
[00338] -> GOLD[142.34.229.4]  : EXPECTING..
[00338] -> SUCCESS!
[00339] -> GOLD[142.34.229.4]  : EXPECTING..
[00339] -> SUCCESS!
[00339] -> GOLD[142.34.229.4]  : EXPECTING..
[00339] -> SUCCESS!
[00340] -> GOLD[142.34.229.4]  : EXPECTING..
[00340] -> SUCCESS!
[00340] -> GOLD[142.34.229.4]  : EXPECTING..
[00340] -> SUCCESS!
[00341] -> GOLD[142.34.229.4]  : EXPECTING..
[00341] -> SUCCESS!
[00341] -> GOLD[142.34.229.4]  : EXPECTING..
[00341] -> SUCCESS!
[00342] -> GOLD[142.34.229.4]  : EXPECTING..
[00342] -> SUCCESS!
[00343] -> GOLD[142.34.229.4]  : EXPECTING..
[00343] -> SUCCESS!
[00343] -> GOLD[142.34.229.4]  : EXPECTING..
[00343] -> SUCCESS!
[00344] -> GOLD[142.34.229.4]  : EXPECTING..
[00344] -> SUCCESS!
[00344] -> GOLD[142.34.229.4]  : EXPECTING..
[00344] -> SUCCESS!
[00345] -> GOLD[142.34.229.4]  : EXPECTING..
[00345] -> SUCCESS!
[00345] -> GOLD[142.34.229.4]  : EXPECTING..
[00345] -> SUCCESS!
[00346] -> GOLD[142.34.229.4]  : EXPECTING..
[00346] -> SUCCESS!
[00346] -> GOLD[142.34.229.4]  : EXPECTING..
[00346] -> SUCCESS!
[00347] -> GOLD[142.34.229.4]  : EXPECTING..
[00347] -> SUCCESS!
[00347] -> GOLD[142.34.229.4]  : EXPECTING..
[00347] -> SUCCESS!
[00348] -> GOLD[142.34.229.4]  : EXPECTING..
[00348] -> SUCCESS!
[00349] -> GOLD[142.34.229.4]  : EXPECTING..
[00349] -> SUCCESS!
[00349] REPEATS (0 of 30) COMMAND expect_routing_to
[00349] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00349] --
[00349] SLEEP 20 seconds..
[00369]
[00369] ---------
[00369] DR THEN RECOVERY
[00369] ---------
[00372] -> SCALED GOLD TO 0 replicas
[00372] -> SCALED GOLDDR TO 2 replicas
[00373] -> GOLD[142.34.229.4]  : DOWN
[00374] -> GOLDDR[142.34.64.4]  : DOWN
[00375] -> GOLDDR[142.34.64.4]  : DOWN
[00376] -> GOLDDR[142.34.64.4]  : DOWN
[00377] -> GOLDDR[142.34.64.4]  : DOWN
[00378] -> GOLDDR[142.34.64.4]  : DOWN
[00379] -> GOLDDR[142.34.64.4]  : DOWN
[00380] -> GOLDDR[142.34.64.4]  : DOWN
[00382] -> GOLDDR[142.34.64.4]  : DOWN
[00384] -> GOLDDR[142.34.64.4]  : DOWN
[00386] -> GOLDDR[142.34.64.4]  : DOWN
[00388] -> GOLDDR[142.34.64.4]  : DOWN
[00390] -> GOLDDR[142.34.64.4]  : UP
[00390] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00390] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4
142.34.229.4]
[00392] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00392] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4
142.34.229.4]
[00395] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00395] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.229.4
142.34.64.4]
[00397] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00397] -> SUCCESS!
[00397] --
[00397] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00397] -> SUCCESS!
[00397] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00397] -> SUCCESS!
[00398] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00398] -> SUCCESS!
[00398] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00398] -> SUCCESS!
[00399] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00399] -> SUCCESS!
[00399] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00399] -> SUCCESS!
[00400] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00400] -> SUCCESS!
[00400] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00400] -> SUCCESS!
[00401] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00401] -> SUCCESS!
[00402] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00402] -> SUCCESS!
[00402] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00402] -> SUCCESS!
[00403] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00403] -> SUCCESS!
[00403] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00403] -> SUCCESS!
[00404] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00404] -> SUCCESS!
[00404] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00404] -> SUCCESS!
[00405] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00405] -> SUCCESS!
[00405] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00405] -> SUCCESS!
[00406] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00406] -> SUCCESS!
[00406] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00406] -> SUCCESS!
[00407] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00407] -> SUCCESS!
[00407] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00407] -> SUCCESS!
[00408] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00408] -> SUCCESS!
[00409] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00409] -> SUCCESS!
[00409] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00409] -> SUCCESS!
[00410] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00410] -> SUCCESS!
[00410] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00410] -> SUCCESS!
[00411] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00411] -> SUCCESS!
[00411] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00411] -> SUCCESS!
[00412] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00412] -> SUCCESS!
[00412] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00412] -> SUCCESS!
[00413] REPEATS (0 of 30) COMMAND expect_routing_to
[00413] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00413] --
[00413] --
[00413] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00413] -> SUCCESS!
[00413] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00413] -> SUCCESS!
[00414] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00414] -> SUCCESS!
[00415] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00415] -> SUCCESS!
[00415] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00415] -> SUCCESS!
[00416] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00416] -> SUCCESS!
[00416] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00416] -> SUCCESS!
[00417] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00417] -> SUCCESS!
[00417] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00417] -> SUCCESS!
[00418] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00418] -> SUCCESS!
[00418] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00418] -> SUCCESS!
[00419] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00419] -> SUCCESS!
[00419] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00419] -> SUCCESS!
[00420] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00420] -> SUCCESS!
[00420] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00420] -> SUCCESS!
[00421] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00421] -> SUCCESS!
[00422] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00422] -> SUCCESS!
[00422] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00422] -> SUCCESS!
[00423] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00423] -> SUCCESS!
[00423] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00423] -> SUCCESS!
[00424] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00424] -> SUCCESS!
[00424] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00424] -> SUCCESS!
[00425] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00425] -> SUCCESS!
[00425] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00425] -> SUCCESS!
[00426] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00426] -> SUCCESS!
[00427] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00427] -> SUCCESS!
[00427] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00427] -> SUCCESS!
[00428] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00428] -> SUCCESS!
[00428] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00428] -> SUCCESS!
[00429] -> GOLDDR[142.34.64.4]  : EXPECTING..
[00429] -> SUCCESS!
[00429] REPEATS (0 of 30) COMMAND expect_routing_to
[00429] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00429] --
[00430] -> SCALED GOLD TO 2 replicas
[00430] -> GOLD[142.34.229.4]  : DOWN
[00432] -> GOLD[142.34.229.4]  : DOWN
[00433] -> GOLD[142.34.229.4]  : DOWN
[00434] -> GOLD[142.34.229.4]  : DOWN
[00435] -> GOLD[142.34.229.4]  : DOWN
[00437] -> GOLD[142.34.229.4]  : DOWN
[00439] -> GOLD[142.34.229.4]  : DOWN
[00441] -> GOLD[142.34.229.4]  : UP
[00441] --
[00441] -> GOLD[142.34.229.4]  : EXPECTING..
[00441] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00442] -> GOLD[142.34.229.4]  : EXPECTING..
[00442] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00442] -> GOLD[142.34.229.4]  : EXPECTING..
[00442] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00443] -> GOLD[142.34.229.4]  : EXPECTING..
[00443] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00443] -> GOLD[142.34.229.4]  : EXPECTING..
[00443] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00444] -> GOLD[142.34.229.4]  : EXPECTING..
[00444] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00444] -> GOLD[142.34.229.4]  : EXPECTING..
[00444] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00445] -> GOLD[142.34.229.4]  : EXPECTING..
[00445] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00445] -> GOLD[142.34.229.4]  : EXPECTING..
[00445] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00446] -> GOLD[142.34.229.4]  : EXPECTING..
[00446] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00447] -> GOLD[142.34.229.4]  : EXPECTING..
[00447] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00447] -> GOLD[142.34.229.4]  : EXPECTING..
[00447] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00448] -> GOLD[142.34.229.4]  : EXPECTING..
[00448] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00448] -> GOLD[142.34.229.4]  : EXPECTING..
[00448] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00449] -> GOLD[142.34.229.4]  : EXPECTING..
[00449] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00449] -> GOLD[142.34.229.4]  : EXPECTING..
[00449] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00450] -> GOLD[142.34.229.4]  : EXPECTING..
[00450] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00450] -> GOLD[142.34.229.4]  : EXPECTING..
[00450] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00451] -> GOLD[142.34.229.4]  : EXPECTING..
[00451] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00451] -> GOLD[142.34.229.4]  : EXPECTING..
[00451] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00452] -> GOLD[142.34.229.4]  : EXPECTING..
[00452] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00453] -> GOLD[142.34.229.4]  : EXPECTING..
[00453] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00453] -> GOLD[142.34.229.4]  : EXPECTING..
[00453] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00454] -> GOLD[142.34.229.4]  : EXPECTING..
[00454] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00454] -> GOLD[142.34.229.4]  : EXPECTING..
[00454] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00455] -> GOLD[142.34.229.4]  : EXPECTING..
[00455] -> FAILED - NOT WHAT IS EXPECTED [DIG = 142.34.64.4]
[00455] -> GOLD[142.34.229.4]  : EXPECTING..
[00455] -> SUCCESS!
[00456] -> GOLD[142.34.229.4]  : EXPECTING..
[00456] -> SUCCESS!
[00456] -> GOLD[142.34.229.4]  : EXPECTING..
[00456] -> SUCCESS!
[00457] -> GOLD[142.34.229.4]  : EXPECTING..
[00457] -> SUCCESS!
[00457] REPEATS (26 of 30) COMMAND expect_routing_to
[00457] REPEATS > TOO MANY FAILURES
[00457] --
[00457] --
[00457] -> GOLD[142.34.229.4]  : EXPECTING..
[00457] -> SUCCESS!
[00458] -> GOLD[142.34.229.4]  : EXPECTING..
[00458] -> SUCCESS!
[00459] -> GOLD[142.34.229.4]  : EXPECTING..
[00459] -> SUCCESS!
[00459] -> GOLD[142.34.229.4]  : EXPECTING..
[00459] -> SUCCESS!
[00460] -> GOLD[142.34.229.4]  : EXPECTING..
[00460] -> SUCCESS!
[00460] -> GOLD[142.34.229.4]  : EXPECTING..
[00460] -> SUCCESS!
[00461] -> GOLD[142.34.229.4]  : EXPECTING..
[00461] -> SUCCESS!
[00461] -> GOLD[142.34.229.4]  : EXPECTING..
[00461] -> SUCCESS!
[00462] -> GOLD[142.34.229.4]  : EXPECTING..
[00462] -> SUCCESS!
[00462] -> GOLD[142.34.229.4]  : EXPECTING..
[00462] -> SUCCESS!
[00463] -> GOLD[142.34.229.4]  : EXPECTING..
[00463] -> SUCCESS!
[00463] -> GOLD[142.34.229.4]  : EXPECTING..
[00463] -> SUCCESS!
[00464] -> GOLD[142.34.229.4]  : EXPECTING..
[00464] -> SUCCESS!
[00464] -> GOLD[142.34.229.4]  : EXPECTING..
[00464] -> SUCCESS!
[00465] -> GOLD[142.34.229.4]  : EXPECTING..
[00465] -> SUCCESS!
[00466] -> GOLD[142.34.229.4]  : EXPECTING..
[00466] -> SUCCESS!
[00466] -> GOLD[142.34.229.4]  : EXPECTING..
[00466] -> SUCCESS!
[00467] -> GOLD[142.34.229.4]  : EXPECTING..
[00467] -> SUCCESS!
[00467] -> GOLD[142.34.229.4]  : EXPECTING..
[00467] -> SUCCESS!
[00468] -> GOLD[142.34.229.4]  : EXPECTING..
[00468] -> SUCCESS!
[00468] -> GOLD[142.34.229.4]  : EXPECTING..
[00468] -> SUCCESS!
[00469] -> GOLD[142.34.229.4]  : EXPECTING..
[00469] -> SUCCESS!
[00469] -> GOLD[142.34.229.4]  : EXPECTING..
[00469] -> SUCCESS!
[00470] -> GOLD[142.34.229.4]  : EXPECTING..
[00470] -> SUCCESS!
[00470] -> GOLD[142.34.229.4]  : EXPECTING..
[00470] -> SUCCESS!
[00471] -> GOLD[142.34.229.4]  : EXPECTING..
[00471] -> SUCCESS!
[00472] -> GOLD[142.34.229.4]  : EXPECTING..
[00472] -> SUCCESS!
[00472] -> GOLD[142.34.229.4]  : EXPECTING..
[00472] -> SUCCESS!
[00473] -> GOLD[142.34.229.4]  : EXPECTING..
[00473] -> SUCCESS!
[00473] -> GOLD[142.34.229.4]  : EXPECTING..
[00473] -> SUCCESS!
[00474] REPEATS (0 of 30) COMMAND expect_routing_to
[00474] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00474] --
[00474] --
[00474] -> GOLD[142.34.229.4]  : EXPECTING..
[00474] -> SUCCESS!
[00474] -> GOLD[142.34.229.4]  : EXPECTING..
[00474] -> SUCCESS!
[00475] -> GOLD[142.34.229.4]  : EXPECTING..
[00475] -> SUCCESS!
[00475] -> GOLD[142.34.229.4]  : EXPECTING..
[00475] -> SUCCESS!
[00476] -> GOLD[142.34.229.4]  : EXPECTING..
[00476] -> SUCCESS!
[00476] -> GOLD[142.34.229.4]  : EXPECTING..
[00476] -> SUCCESS!
[00477] -> GOLD[142.34.229.4]  : EXPECTING..
[00477] -> SUCCESS!
[00477] -> GOLD[142.34.229.4]  : EXPECTING..
[00477] -> SUCCESS!
[00478] -> GOLD[142.34.229.4]  : EXPECTING..
[00478] -> SUCCESS!
[00479] -> GOLD[142.34.229.4]  : EXPECTING..
[00479] -> SUCCESS!
[00479] -> GOLD[142.34.229.4]  : EXPECTING..
[00479] -> SUCCESS!
[00480] -> GOLD[142.34.229.4]  : EXPECTING..
[00480] -> SUCCESS!
[00480] -> GOLD[142.34.229.4]  : EXPECTING..
[00480] -> SUCCESS!
[00481] -> GOLD[142.34.229.4]  : EXPECTING..
[00481] -> SUCCESS!
[00481] -> GOLD[142.34.229.4]  : EXPECTING..
[00481] -> SUCCESS!
[00482] -> GOLD[142.34.229.4]  : EXPECTING..
[00482] -> SUCCESS!
[00482] -> GOLD[142.34.229.4]  : EXPECTING..
[00482] -> SUCCESS!
[00483] -> GOLD[142.34.229.4]  : EXPECTING..
[00483] -> SUCCESS!
[00483] -> GOLD[142.34.229.4]  : EXPECTING..
[00483] -> SUCCESS!
[00484] -> GOLD[142.34.229.4]  : EXPECTING..
[00484] -> SUCCESS!
[00485] -> GOLD[142.34.229.4]  : EXPECTING..
[00485] -> SUCCESS!
[00485] -> GOLD[142.34.229.4]  : EXPECTING..
[00485] -> SUCCESS!
[00486] -> GOLD[142.34.229.4]  : EXPECTING..
[00486] -> SUCCESS!
[00486] -> GOLD[142.34.229.4]  : EXPECTING..
[00486] -> SUCCESS!
[00487] -> GOLD[142.34.229.4]  : EXPECTING..
[00487] -> SUCCESS!
[00487] -> GOLD[142.34.229.4]  : EXPECTING..
[00487] -> SUCCESS!
[00488] -> GOLD[142.34.229.4]  : EXPECTING..
[00488] -> SUCCESS!
[00488] -> GOLD[142.34.229.4]  : EXPECTING..
[00488] -> SUCCESS!
[00489] -> GOLD[142.34.229.4]  : EXPECTING..
[00489] -> SUCCESS!
[00489] -> GOLD[142.34.229.4]  : EXPECTING..
[00489] -> SUCCESS!
[00490] REPEATS (0 of 30) COMMAND expect_routing_to
[00490] REPEATS > NICE! ALL ATTEMPTS WERE OK!
[00490] --
```
